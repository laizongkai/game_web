import{d as ee,r as _,o as te,c as le,a as i,b as t,e as oe,_ as se,f as y,t as p,F as S,g as $,h as D,w as r,v as g,i as h,p as ae,j as ie,k as ne,l as de,m as n}from"./index-CMFezg7R.js";const re={id:"view_body"},ue={style:{width:"90%"}},pe={id:"title_and_create"},me={"aria-label":"Page navigation example"},ce={class:"pagination"},ve={key:0,class:"page-item"},_e={class:"page-item"},ge={class:"page-item"},be={class:"page-link",href:"#",style:{background:"rgb(120, 120, 120)"}},fe={class:"page-item"},he={key:3,class:"page-item"},ye={id:"product-management-list"},xe={class:"table table-hover"},we={class:"text-center",scope:"col",style:{"font-weight":"bolder"}},ke={class:"align-middle text-center",scope:"row"},Ce={class:"align-middle text-center",style:{width:"10%"}},Me={class:"align-middle text-center",style:{width:"10%"}},Ve={class:"align-middle text-center",style:{width:"10%"}},Ue={class:"align-middle text-center"},Be={class:"align-middle text-center",style:{width:"10%"}},Pe={class:"align-middle text-center",style:{width:"10%"}},Ee={class:"align-middle text-center",style:{width:"10%"}},Se={class:"align-middle text-center",style:{width:"15%"}},$e=["onClick"],De=["onClick"],Le={class:"modal fade",id:"CreateModal","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"exampleModalToggleLabel",tabindex:"-1"},je={class:"modal-dialog modal-dialog-centered modal-xl",style:{width:"1300px","min-width":"650px"}},Te={class:"modal-content"},Fe={class:"modal-header"},Ie={class:"modal-body"},Ne={class:"modal-form",style:{width:"100%",height:"50%"}},Ke={style:{width:"400px",height:"250px",position:"relative",display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"center","align-content":"center","overflow-x":"hidden",border:"2px solid gainsboro","border-radius":"10px"}},Oe={style:{width:"100%",opacity:"0"}},qe=["src"],Ge={key:1,src:D,style:{height:"100%"},class:"preview"},Re={class:"modal-form-body",style:{width:"600px",height:"250px"}},Ae={class:"modal-form-component"},ze={class:"modal-form-row"},He={class:"modal-form-component"},Je={class:"modal-form-component"},Qe={class:"edit-form-row"},We={class:"edit-form-component"},Xe={class:"edit-form-component"},Ye={class:"edit-form-row"},Ze={class:"edit-form-component"},et={class:"edit-form-component"},tt={class:"input-group mb-3"},lt={key:1,class:"form-control",value:"請上傳檔案",disabled:""},ot={key:0,class:"alert alert-danger",role:"alert",style:{"margin-top":"10px"}},st={class:"modal-footer"},at={class:"modal fade",id:"EditModal","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"exampleModalToggleLabel",tabindex:"-1"},it={class:"modal-dialog modal-dialog-centered modal-xl",style:{width:"1300px","min-width":"650px"}},nt={class:"modal-content"},dt={class:"modal-body"},rt={class:"edit-form",style:{width:"100%",height:"50%"}},ut={style:{width:"400px",height:"250px",position:"relative",display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"center","align-content":"center","overflow-x":"hidden",border:"2px solid gainsboro","border-radius":"10px"}},pt={style:{width:"100%",opacity:"0"}},mt=["src"],ct={key:1,src:D,style:{height:"100%"},class:"preview"},vt={class:"edit-form-body",style:{width:"600px",height:"250px"}},_t={class:"edit-form-component"},gt={class:"edit-form-row"},bt={class:"edit-form-component"},ft={class:"edit-form-component"},ht={class:"edit-form-row"},yt={class:"edit-form-component"},xt={class:"edit-form-component"},wt={class:"edit-form-row"},kt={class:"edit-form-component"},Ct={class:"edit-form-component"},Mt={class:"input-group mb-3"},Vt={key:1,class:"form-control",value:"請上傳檔案",disabled:""},Ut={key:0,class:"alert alert-danger",role:"alert",style:{"margin-top":"10px"}},Bt={class:"modal fade",id:"DeleteModal","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"exampleModalToggleLabel",tabindex:"-1"},Pt={class:"modal-dialog modal-dialog-centered"},Et={class:"modal-content"},St={key:0,class:"alert alert-danger",role:"alert",style:{"margin-top":"10px"}},Lt=ee({__name:"ProductionManagement",setup($t){const L=["#","平台","商品類型","新/舊","商品名稱","進貨價格","建議售價","剩餘數量","操作"],v=_(1),k=_(0),x=_(5),d=_([]),b=_([]),j=_(""),m=_(""),s=_({name:"",platformer:"",production_used:"",type:"",purchase_price:0,selling_price:0,img_path:"",img_base64:"",count:0}),a=_({id:"",name:"",platformer:"",production_used:"",type:"",purchase_price:0,selling_price:0,img_path:"",count:0}),U=_(""),w=o=>{v.value+=o},T=o=>{a.value={...o}},F=o=>{U.value=o};async function I(){const{products:o,message:e,error:l}=await de();d.value=o.value,j.value=e.value}const N=async()=>{await I(),b.value=[...d.value],P()},B=function(o,e){var l=new FileReader;l.onload=function(){if(e=="create"){let u=document.getElementById("create_img");u.src=l.result,s.value.img_base64=l.result}else{let u=document.getElementById("edit_img");u.src=l.result,a.value.img_base64=l.result}},l.readAsDataURL(o.target.files[0]),e=="create"?s.value.img_path=o.target.files[0].name:a.value.img_path=o.target.files[0].name},K=o=>`http://127.0.0.1:8000/products/get-image/${o}`,O=async()=>{if(s.value.name==""||s.value.platformer==""||s.value.production_used==""||s.value.type==""){m.value="有必填欄位未填寫";return}else{m.value="";let o={name:s.value.name,platformer:s.value.platformer,production_used:s.value.production_used,type:s.value.type,purchase_price:s.value.purchase_price,selling_price:s.value.selling_price,img_path:s.value.img_path,img_base64:s.value.img_base64,count:s.value.count};const{product:e,message:l}=await ae(o);l.value=="OK"?(e!=null&&V("create",e),q(),C()):m.value=l.value}},q=()=>{let o=document.getElementById("CreateModalCloseBtn");o==null||o.click()},C=()=>{m.value="",s.value.name="",s.value.platformer="",s.value.production_used="",s.value.type="",s.value.purchase_price=0,s.value.selling_price=0,s.value.img_path="",s.value.img_base64="",s.value.count=0},G=async()=>{let o={id:a.value.id,name:a.value.name,platformer:a.value.platformer,production_used:a.value.production_used,type:a.value.type,purchase_price:a.value.purchase_price,selling_price:a.value.selling_price,img_path:a.value.img_path,img_base64:a.value.img_base64,count:a.value.count};const{product:e,message:l}=await ie(o);l.value=="OK"?(e!=null&&V("edit",e),R(),M()):(m.value=l.value,window.alert("Error"))},R=()=>{let o=document.getElementById("EditModalCloseBtn");o==null||o.click()},M=()=>{m.value=""},A=async()=>{let o={id:U.value};const{product:e,message:l}=await ne(o);l.value=="OK"?(e!=null&&V("delete",e),z(),H()):m.value=l.value},z=()=>{let o=document.getElementById("DeleteModalCloseBtn");o==null||o.click()},H=()=>{m.value=""},V=(o,e)=>{var l,u;if(o=="create")(l=d.value)==null||l.push(e.value);else if(o=="edit"){for(let c=0;c<d.value.length;c++)if(d.value[c].id==e.value.id){d.value[c]=e.value;break}}else for(let c=0;c<d.value.length;c++)if(d.value[c].id==e.value.id){(u=d.value)==null||u.splice(c,1);break}b.value=[...d.value]},P=()=>{k.value=Math.ceil(b.value.length/x.value),v.value=1},J=o=>{var E;let e=Q(o.type),l=W(o.platformer),u=X(o.product_exist),c=Y(o.name);b.value.length=0;for(let f=0;f<d.value.length;f++)e.includes(f)&&l.includes(f)&&u.includes(f)&&c.includes(f)&&((E=b.value)==null||E.push(d.value[f]));P()},Q=o=>{let e=[];for(let l=0;l<d.value.length;l++)o!=""?d.value[l].type==o&&e.push(l):e.push(l);return e},W=o=>{let e=[];for(let l=0;l<d.value.length;l++)o!=""?d.value[l].platformer==o&&e.push(l):e.push(l);return e},X=o=>{let e=[];for(let l=0;l<d.value.length;l++)o!=""?d.value[l].count>0&&e.push(l):e.push(l);return e},Y=o=>{let e=[];for(let l=0;l<d.value.length;l++)o!=""?d.value[l].name.includes(o)&&e.push(l):e.push(l);return e};te(()=>{N()});const Z=le(()=>{let o=(v.value-1)*x.value,e=v.value*x.value,l=[];for(let u=o;u<e;u++)u<b.value.length&&l.push(b.value[u]);return l});return(o,e)=>(n(),i("div",re,[t("div",ue,[oe(se,{onSearch:J}),e[57]||(e[57]=t("hr",{style:{border:"1px solid"}},null,-1)),t("div",pe,[e[29]||(e[29]=t("div",{style:{display:"flex","flex-direction":"row"}},[t("label",{class:"title"}," 管理列表 "),t("button",{class:"btn btn-primary create-btn","data-bs-toggle":"modal","data-bs-target":"#CreateModal"}," 新增 ")],-1)),t("nav",me,[t("ul",ce,[v.value<=1?(n(),i("li",ve,e[25]||(e[25]=[t("a",{class:"page-link",href:"#","aria-label":"Previous"},[t("span",{"aria-hidden":"true"},"«")],-1)]))):(n(),i("li",{key:1,class:"page-item",onClick:e[0]||(e[0]=l=>w(-1))},e[26]||(e[26]=[t("a",{class:"page-link",href:"#","aria-label":"Previous"},[t("span",{"aria-hidden":"true"},"«")],-1)]))),t("li",_e,[v.value>1?(n(),i("a",{key:0,class:"page-link",href:"#",onClick:e[1]||(e[1]=l=>w(-1))},p(v.value-1),1)):y("",!0)]),t("li",ge,[t("a",be,p(v.value),1)]),t("li",fe,[v.value<k.value?(n(),i("a",{key:0,class:"page-link",href:"#",onClick:e[2]||(e[2]=l=>w(1))},p(v.value+1),1)):y("",!0)]),v.value<k.value?(n(),i("li",{key:2,class:"page-item",onClick:e[3]||(e[3]=l=>w(1))},e[27]||(e[27]=[t("a",{class:"page-link",href:"#","aria-label":"Next"},[t("span",{"aria-hidden":"true"},"»")],-1)]))):(n(),i("li",he,e[28]||(e[28]=[t("a",{class:"page-link",href:"#","aria-label":"Next"},[t("span",{"aria-hidden":"true"},"»")],-1)])))])])]),t("div",ye,[t("table",xe,[t("thead",null,[t("tr",null,[(n(),i(S,null,$(L,l=>t("th",we,p(l),1)),64))])]),t("tbody",null,[(n(!0),i(S,null,$(Z.value,(l,u)=>(n(),i("tr",null,[t("th",ke,p(u+x.value*(v.value-1)+1),1),t("td",Ce,p(l.platformer),1),t("td",Me,p(l.type),1),t("td",Ve,p(l.production_used),1),t("td",Ue,p(l.name),1),t("td",Be,p(l.purchase_price),1),t("td",Pe,p(l.selling_price),1),t("td",Ee,p(l.count),1),t("td",Se,[t("button",{class:"btn btn-primary table-btn","data-bs-toggle":"modal","data-bs-target":"#EditModal",onClick:c=>T(l)}," 編輯 ",8,$e),t("button",{class:"btn btn-danger table-btn","data-bs-toggle":"modal","data-bs-target":"#DeleteModal",onClick:c=>F(l.id)}," 刪除 ",8,De)])]))),256))])]),t("div",Le,[t("div",je,[t("div",Te,[t("div",Fe,[e[30]||(e[30]=t("h5",{class:"modal-title",id:"exampleModalToggleLabel"}," 新增資料 ",-1)),t("button",{id:"CreateModalCloseBtn",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[4]||(e[4]=l=>C())})]),t("div",Ie,[t("div",Ne,[t("div",Ke,[t("div",Oe,[t("input",{type:"file",id:"image_uploads",name:"image_uploads",accept:".jpg, .jpeg, .png",onChange:e[5]||(e[5]=l=>B(l,"create")),style:{position:"absolute","background-color":"aqua",height:"100%",width:"100%"}},null,32)]),s.value.img_path!=""?(n(),i("img",{key:0,id:"create_img",src:s.value.img_path,style:{height:"100%"},class:"preview"},null,8,qe)):(n(),i("img",Ge))]),t("div",Re,[t("div",Ae,[e[31]||(e[31]=t("label",{class:"modal-form-component-title"}," 商品名稱： ",-1)),r(t("input",{class:"form-control",style:{width:"500px"},"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.name=l)},null,512),[[g,s.value.name]])]),t("div",ze,[t("div",He,[e[33]||(e[33]=t("label",{class:"modal-form-component-title"}," 平台： ",-1)),r(t("select",{class:"form-select",style:{width:"150px"},"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.platformer=l)},e[32]||(e[32]=[t("option",null," PS4 ",-1),t("option",null," PS5 ",-1),t("option",null," Switch ",-1),t("option",null," Switch2 ",-1),t("option",null," PC ",-1),t("option",null," 其它 ",-1)]),512),[[h,s.value.platformer]])]),t("div",Je,[e[35]||(e[35]=t("label",{class:"modal-form-component-title"}," 商品類型： ",-1)),r(t("select",{class:"form-select",style:{width:"150px"},"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.type=l)},e[34]||(e[34]=[t("option",null," 遊戲 ",-1),t("option",null," 配件 ",-1),t("option",null," 其它 ",-1)]),512),[[h,s.value.type]])])]),t("div",Qe,[t("div",We,[e[36]||(e[36]=t("label",{class:"edit-form-component-title"}," 進貨價格： ",-1)),r(t("input",{class:"form-control",style:{width:"150px"},"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.purchase_price=l)},null,512),[[g,s.value.purchase_price]])]),t("div",Xe,[e[37]||(e[37]=t("label",{class:"edit-form-component-title"}," 售出價格： ",-1)),r(t("input",{class:"form-control",style:{width:"150px"},"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.selling_price=l)},null,512),[[g,s.value.selling_price]])])]),t("div",Ye,[t("div",Ze,[e[38]||(e[38]=t("label",{class:"edit-form-component-title"}," 剩餘數量： ",-1)),r(t("input",{class:"form-control",style:{width:"150px"},"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.count=l)},null,512),[[g,s.value.count]])]),t("div",et,[e[40]||(e[40]=t("label",{class:"edit-form-component-title"}," 新/舊： ",-1)),r(t("select",{class:"form-select",style:{width:"150px"},"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.production_used=l)},e[39]||(e[39]=[t("option",null," 新品 ",-1),t("option",null," 二手 ",-1)]),512),[[h,s.value.production_used]])])]),t("div",null,[t("div",tt,[e[41]||(e[41]=t("label",{class:"edit-form-component-title"}," 圖片上傳： ",-1)),s.value.img_path!=""?r((n(),i("input",{key:0,class:"form-control",id:"inputGroupFile02","onUpdate:modelValue":e[13]||(e[13]=l=>s.value.img_path=l),disabled:""},null,512)),[[g,s.value.img_path]]):(n(),i("input",lt))])])])]),m.value!=""?(n(),i("div",ot,p(m.value),1)):y("",!0)]),t("div",st,[t("button",{class:"btn btn-secondary",style:{width:"80px"},"data-bs-dismiss":"modal",onClick:e[14]||(e[14]=l=>C())}," 取消 "),t("button",{class:"btn btn-primary",style:{width:"80px"},onClick:e[15]||(e[15]=l=>O())}," 確認 ")])])])]),t("div",at,[t("div",it,[t("div",nt,[t("div",{class:"modal-header"},[e[42]||(e[42]=t("h5",{class:"modal-title",id:"exampleModalToggleLabel"}," 編輯資料 ",-1)),t("button",{id:"EditModalCloseBtn",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:M})]),t("div",dt,[t("div",rt,[t("div",ut,[t("div",pt,[t("input",{type:"file",id:"image_uploads",name:"image_uploads",accept:".jpg, .jpeg, .png",onChange:e[16]||(e[16]=l=>B(l,"edit")),style:{position:"absolute","background-color":"aqua",height:"100%",width:"100%"}},null,32)]),a.value.img_path!=""?(n(),i("img",{key:0,id:"edit_img",src:K(a.value.img_path),style:{height:"100%"},class:"preview"},null,8,mt)):(n(),i("img",ct))]),t("div",vt,[t("div",_t,[e[43]||(e[43]=t("label",{class:"edit-form-component-title"}," 商品名稱： ",-1)),r(t("input",{class:"form-control",style:{width:"500px"},"onUpdate:modelValue":e[17]||(e[17]=l=>a.value.name=l)},null,512),[[g,a.value.name]])]),t("div",gt,[t("div",bt,[e[45]||(e[45]=t("label",{class:"edit-form-component-title"}," 平台： ",-1)),r(t("select",{class:"form-select",style:{width:"150px"},"onUpdate:modelValue":e[18]||(e[18]=l=>a.value.platformer=l)},e[44]||(e[44]=[t("option",null," PS4 ",-1),t("option",null," PS5 ",-1),t("option",null," Switch ",-1),t("option",null," Switch2 ",-1),t("option",null," PC ",-1),t("option",null," 其它 ",-1)]),512),[[h,a.value.platformer]])]),t("div",ft,[e[47]||(e[47]=t("label",{class:"edit-form-component-title"}," 商品類型： ",-1)),r(t("select",{class:"form-select",style:{width:"150px"},"onUpdate:modelValue":e[19]||(e[19]=l=>a.value.type=l)},e[46]||(e[46]=[t("option",null," 遊戲 ",-1),t("option",null," 配件 ",-1),t("option",null," 其它 ",-1)]),512),[[h,a.value.type]])])]),t("div",ht,[t("div",yt,[e[48]||(e[48]=t("label",{class:"edit-form-component-title"}," 進貨價格： ",-1)),r(t("input",{class:"form-control",style:{width:"150px"},"onUpdate:modelValue":e[20]||(e[20]=l=>a.value.purchase_price=l)},null,512),[[g,a.value.purchase_price]])]),t("div",xt,[e[49]||(e[49]=t("label",{class:"edit-form-component-title"}," 售出價格： ",-1)),r(t("input",{class:"form-control",style:{width:"150px"},"onUpdate:modelValue":e[21]||(e[21]=l=>a.value.selling_price=l)},null,512),[[g,a.value.selling_price]])])]),t("div",wt,[t("div",kt,[e[50]||(e[50]=t("label",{class:"edit-form-component-title"}," 剩餘數量： ",-1)),r(t("input",{class:"form-control",style:{width:"150px"},"onUpdate:modelValue":e[22]||(e[22]=l=>a.value.count=l)},null,512),[[g,a.value.count]])]),t("div",Ct,[e[52]||(e[52]=t("label",{class:"edit-form-component-title"}," 新/舊： ",-1)),r(t("select",{class:"form-select",style:{width:"150px"},"onUpdate:modelValue":e[23]||(e[23]=l=>a.value.production_used=l)},e[51]||(e[51]=[t("option",null," 新品 ",-1),t("option",null," 二手 ",-1)]),512),[[h,a.value.production_used]])])]),t("div",null,[t("div",Mt,[e[53]||(e[53]=t("label",{class:"edit-form-component-title"}," 圖片上傳： ",-1)),a.value.img_path!=""?r((n(),i("input",{key:0,class:"form-control",id:"inputGroupFile02","onUpdate:modelValue":e[24]||(e[24]=l=>a.value.img_path=l),disabled:""},null,512)),[[g,a.value.img_path]]):(n(),i("input",Vt))])])])]),m.value!=""?(n(),i("div",Ut,p(m.value),1)):y("",!0)]),t("div",{class:"modal-footer"},[t("button",{class:"btn btn-secondary",style:{width:"80px"},"data-bs-dismiss":"modal",onClick:M}," 取消 "),t("button",{class:"btn btn-primary",style:{width:"80px"},onClick:G}," 確認 ")])])])]),t("div",Bt,[t("div",Pt,[t("div",Et,[e[55]||(e[55]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"exampleModalToggleLabel"}," 刪除確認 "),t("button",{id:"DeleteModalCloseBtn",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[56]||(e[56]=t("div",{class:"modal-body"}," 確定要刪除該筆資料？？ ",-1)),m.value!=""?(n(),i("div",St,p(m.value),1)):y("",!0),t("div",{class:"modal-footer"},[e[54]||(e[54]=t("button",{class:"btn btn-secondary",style:{width:"80px"},"data-bs-dismiss":"modal"}," 取消 ",-1)),t("button",{class:"btn btn-danger",style:{width:"80px"},onClick:A}," 確認 ")])])])])])])]))}});export{Lt as default};
